var main = function() {
	"use strict";
	init();
	buttonClick(result);
	


};

var buttonClick = function (callback) {
	$("main .select input").toArray().forEach(function (element) {

		$(element).on("click", function () {
			var $element = $(element);

			if($element.parent().is(":nth-child(1)")) {
				$.post("play/rock", {}, function (response) {
					callback(response);
				});
				console.log("FIRST TAB CLICKED!");
			} else if ($element.parent().is(":nth-child(2)")) {
				$.post("play/paper", {}, function (response) {
					//console.log(response);
					callback(response);

				});
				console.log("Second TAB CLICKED!");
			} else if ($element.parent().is(":nth-child(3)")) {
				$.post("play/scissor", {}, function (response) {
					callback(response);
				  //console.log(response);
				});
				console.log("third TAB CLICKED!");
			} else if ($element.parent().is(":nth-child(4)")) {
				$.post("play/lizard", {}, function (response) {
					callback(response);
					//console.log(response);
				});
				console.log("fourth TAB CLICKED!");
			} else if ($element.parent().is(":nth-child(5)")) {
				$.post("play/spock", {}, function (response) {
					callback(response);
					//console.log(response);
				});
				console.log("fifth TAB CLICKED!");
			}


		});
	});
};

var result = function (response) {
	var $content;
	var $form;
	$("main .result").empty();
	$content = $("<p>").text("Result");
	$("main .result").append($content);
	$content = $("<p>").text("You chose: " + response.player);
	$(".result").append($content);
	$content = $("<p>").text("AI chose: " + response.ai);
	$(".result").append($content);
	$content = $("<p>").text("Outcome: " + response.outcome);
	$(".result").append($content);
	$content = $("<p>").text("Total Losses: " + response.losses);
	$(".result").append($content);
	$content = $("<p>").text("Total Wins: " + response.wins);
	$(".result").append($content);
	$content = $("<p>").text("Total Ties: " + response.ties);
	$(".result").append($content);

};

var init = function () {
	var $content,
	$div,
	$form;

	//$("main").empty();


	$content = $("<p>").text("Choose");
	$div = $("<div>").attr("class", "select");
	
	$form = $("<form>").attr("method", "POST"). attr("action", '/play/rock').append($("<input>")
			.attr("type", "button").attr("value", "Rock"));
	$div.append($form);
	$form = $("<form>").attr("method", "POST"). attr("action", "/play/paper").append($("<input>")
			.attr("type", "button").attr("value", "Paper"));
	$div.append($form);
	$form = $("<form>").attr("method", "POST"). attr("action", "/play/scissor").append($("<input>")
			.attr("type", "button").attr("value", "Scissor"));
	$div.append($form);
	$form = $("<form>").attr("method", "POST"). attr("action", "/play/lizard").append($("<input>")
			.attr("type", "button").attr("value", "Lizard"));
	$div.append($form);
	$form = $("<form>").attr("method", "POST"). attr("action", "/play/spock").append($("<input>")
			.attr("type", "button").attr("value", "Spock"));
	$div.append($form);

	$("main .input").append($content).append($div);
};

$(document).ready(main);